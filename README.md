flowchart TD
    A[Начало программы] --> B[Подключение модулей: http, fs, path]
    B --> C[Создание HTTP-сервера с обработчиком onrequest]
    C --> D[Запуск сервера на порту 3000, хост '0.0.0.0']
    D --> E[Вывод в консоль: "Сервер запущен на http://localhost:3000"]
    
    E --> F
    
    subgraph "Функция onrequest"
        F[Получение URL: если "/", то "/index.html", иначе исходный URL] --> G[Формирование локального пути: __dirname + URL]
        G --> H[Проверка существования файла (fs.access)]
        H -->|Файл не найден| I[Отправить 404 (текст/html)]
        H -->|Файл существует| J[Определить Content-Type по расширению файла]
        J --> K[Чтение файла (fs.readFile)]
        K -->|Ошибка при чтении| L[Отправить 500 (ошибка сервера)]
        K -->|Успешное чтение файла| M[Отправить 200 + данные с правильным Content-Type]
        I --> N[Завершение ответа (response.end)]
        L --> N
        M --> N
    end
